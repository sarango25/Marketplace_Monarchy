{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBAiBAE,eAAeC,EAAaC,EAAQC,EAAS,IAQzC,OANqBA,EAAOC,KAAKJ,MAAOK,IACpC,MAAMC,QARdN,eAAoCE,EAAQG,GACxC,MAAME,EAAaC,EAAAC,IAAKP,EAAS,gBAAgBG,EAAMK,QACvD,aAAaF,EAAAG,YAAYJ,EAAWF,GAMHO,CAAqBV,EAAQG,GAE1D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAAQI,EAAeG,IAAIK,cDnB7D,MAAMC,EAAoBC,SAASC,eAAe,qBAElDC,QAAQC,IAAIJ,GACZG,QAAQC,IAAItB,EAAAK,SAEZa,EAAkBK,iBAAkB,UAASpB,MAAOqB,IACpDA,EAAEC,iBACFJ,QAAQC,IAAI,qBAIZ,MAAMT,EAAOK,EAAkBL,KAAKa,MAC9BC,EAAcT,EAAkBS,YAAYD,MAC5CE,EAAQV,EAAkBU,MAAMF,MAChCG,EAAWX,EAAkBW,SAASH,MACtCI,EAAMZ,EAAkBY,IAAIC,MAElC,IAAIC,EAAU,GAEd,GAAIF,EAAIG,OAAQ,CAEZ,MAAMC,QAAiB9B,EAAaJ,EAAAK,QAAS,IAAIyB,IAEjDE,QAAgBG,QAAQC,IAAIF,GAGhC,MAAMG,EAAa,MACfxB,cACAc,QACAC,WACAC,EACAC,IAAKE,SC/BT7B,eAA2BmC,EAAIC,GAC3B,UACUrC,EAAAsC,OAAOtC,EAAAuC,WAAWH,EAAI,YAAYC,GACxClB,QAAQC,IAAI,iBAEf,MAAOE,GACJH,QAAQC,IAAIE,ID4BdkB,CAAW1C,EAAAsC,GAAGD","sources":["src/scripts/functions/createProduct.js","src/scripts/functions/addProduct.js"],"sourcesContent":["import {app, auth, db, storage} from \"./properties\"\nimport { addProduct, uploadImages } from \"./addProduct\";\n\nconst createProductForm = document.getElementById(\"createProductForm\");\n\nconsole.log(createProductForm);\nconsole.log(storage)\n\ncreateProductForm.addEventListener (\"submit\",async (e) => {\ne.preventDefault();\nconsole.log(\"Add a new product\");\n\n\n\nconst name = createProductForm.name.value;\nconst description = createProductForm.description.value;\nconst price = createProductForm.price.value;\nconst category = createProductForm.category.value;\nconst img = createProductForm.img.files;\n\nlet gallery = [];\n\nif (img.length) {\n\n    const imageRef = await uploadImages(storage, [...img]);\n    \n    gallery = await Promise.all(imageRef)\n}\n\nconst newProduct = {\n    name,\n    description,\n    price,\n    category,\n    img: gallery,\n};\n\nawait addProduct(db,newProduct);\n\n\n});","import {addDoc, collection} from \"firebase/firestore\";\nimport {ref,uploadBytes, getDownloadURL} from \"firebase/storage\";\n\nasync function addProduct (db, product){\n    try{\n        await addDoc(collection(db, \"products\"),product);\n        console.log(\"Product added\") \n\n    }catch (e){\n        console.log(e);\n    }\n}\nasync function imageUploadReference(storage,image){\n    const storageRef = ref (storage, `products/img/${image.name}`);\n    return await uploadBytes(storageRef,image);\n}\n\nasync function uploadImages(storage,images = []){\n\n    const uploadImages = images.map (async (image) => {\n        const imageReference = await imageUploadReference(storage,image);\n\n        return getDownloadURL(ref(storage,imageReference.ref.fullPath));\n    });\n\n    return uploadImages;\n\n}\nexport{\n    addProduct,\n    uploadImages\n}\n"],"names":["$9SbQW","parcelRequire","$etBjH","async","$5ff810c2bfdb1b0e$export$633f5b6169e2b910","storage","images","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$5ff810c2bfdb1b0e$var$imageUploadReference","getDownloadURL","fullPath","$3e47109ef95ac59e$var$createProductForm","document","getElementById","console","log","addEventListener","e","preventDefault","value","description","price","category","img","files","gallery","length","imageRef","Promise","all","newProduct","db","product","addDoc","collection","$5ff810c2bfdb1b0e$export$7caf006d7b64ee15"],"version":3,"file":"createProduct.ea8b79a3.js.map"}